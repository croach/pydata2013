<!DOCTYPE html>
<html>
<head>
    <title>Congressional Gridlock</title>
    <script src="js/d3.v3.js" charset="utf-8"></script>
    <style type="text/css">
/*    line {
      stroke: rgba(32,32,32,.05);
    }
*/
/*    #tooltip {
        position: absolute;
        width: 200px;
        height: auto;
        padding: 10px;
        background-color: black;
        opacity: 0.9;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
        -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
        -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
        box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
        pointer-events: none;
    }

    #tooltip.hidden {
        display: none;
    }

    #tooltip p {
        margin: 0;
        font-family: sans-serif;
        font-size: 16px;
        line-height: 20px;
        color: white;
    }*/
    </style>
</head>
<body>
    <script type="text/javascript">
    var w = 500;
    var h = 400;
    var r = 5;

    var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

    d3.json('js/network.json', function(error, graph) {
        if (error) return console.warn(error);
        var force = d3.layout.force()
                      .charge(-600)
                      .linkDistance(70)
                      // .gravity(.75)
                      .nodes(graph.nodes)
                      .links(graph.links)
                      .size([w, h])
                      .start();

        var links = svg.selectAll(".link")
                       .data(graph.links)
                       .enter()
                       .append("line")
                       .attr("class", "link");

        var nodes = svg.selectAll(".node")
                       .data(graph.nodes)
                       .enter()
                       .append("circle")
                       .attr("class", "node")
                       .attr("r", r)
                       .style("fill", function(d) {
                            if (d.party_affiliation === "democrat") {
                                return "blue";
                            } else if (d.party_affiliation === "republican") {
                                return "red";
                            } else {
                                return "grey";
                            }
                       });

        force.on("tick", function() {
            // The code below was taken from Mike Bostock's Bounding Box example
            // which was shown in his talk on data visualization.
            // Example: http://mbostock.github.io/d3/talk/20110921/bounding.html
            // Talk Video: http://vimeo.com/29458354
            nodes.attr("cx", function(d) { return d.x = Math.max(r, Math.min(w - r, d.x)); })
                 .attr("cy", function(d) { return d.y = Math.max(r, Math.min(h - r, d.y)); });

            links.attr("x1", function(d) { return d.source.x; })
                 .attr("y1", function(d) { return d.source.y; })
                 .attr("x2", function(d) { return d.target.x; })
                 .attr("y2", function(d) { return d.target.y; });

            // nodes.attr("cx", function(d) { return d.x; })
            //      .attr("cy", function(d) { return d.y; });
        })

    });
    </script>
</body>
</html>